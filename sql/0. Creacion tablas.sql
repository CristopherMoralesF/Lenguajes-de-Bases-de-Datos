CREATE TABLE EDIFICIO (
    ID_EDIFICIO             VARCHAR(20) PRIMARY KEY, 
    DESCRIPCION_EDIFICIO    VARCHAR(100) NOT NULL
); 

INSERT INTO EDIFICIO VALUES ('CR-1','EDIFICIO PRINCIPAL'); 
INSERT INTO EDIFICIO VALUES ('CR-2','FABRICA PRINCIPAL'); 
INSERT INTO EDIFICIO VALUES ('CR-3','BODEGAS'); 

SELECT * FROM EDIFICIO;

CREATE TABLE UBICACION(
    ID_UBICACIÓN            INT GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    ID_EDIFICIO             VARCHAR(20) NOT NULL, 
    DESCRIPCION_SECCION     VARCHAR(50),
    CONSTRAINT FK_ID_EDIFICIO FOREIGN KEY (ID_EDIFICIO) REFERENCES EDIFICIO(ID_EDIFICIO)
); 

INSERT INTO UBICACION (ID_EDIFICIO,DESCRIPCION_SECCION) VALUES ('CR-1','Nossara');
INSERT INTO UBICACION (ID_EDIFICIO,DESCRIPCION_SECCION) VALUES ('CR-1','Ocotal');
INSERT INTO UBICACION (ID_EDIFICIO,DESCRIPCION_SECCION) VALUES ('CR-1','Conchal');
INSERT INTO UBICACION (ID_EDIFICIO,DESCRIPCION_SECCION) VALUES ('CR-1','Uva');
INSERT INTO UBICACION (ID_EDIFICIO,DESCRIPCION_SECCION) VALUES ('CR-2','Ensamblaje');
INSERT INTO UBICACION (ID_EDIFICIO,DESCRIPCION_SECCION) VALUES ('CR-2','Prueba');
INSERT INTO UBICACION (ID_EDIFICIO,DESCRIPCION_SECCION) VALUES ('CR-3','Bodega A');
INSERT INTO UBICACION (ID_EDIFICIO,DESCRIPCION_SECCION) VALUES ('CR-3','Bodega B');
INSERT INTO UBICACION (ID_EDIFICIO,DESCRIPCION_SECCION) VALUES ('CR-3','Bodega C');

SELECT * FROM UBICACION;

CREATE TABLE USUARIO_ROLE(
    ID_ROLE                 INT GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY, 
    NOMBRE_ROLE             VARCHAR(50),
    DESCRIPCION_PERMISOS    VARCHAR(100)
); 

INSERT INTO USUARIO_ROLE (NOMBRE_ROLE,DESCRIPCION_PERMISOS) VALUES ('ADMIN','Permiso total');
INSERT INTO USUARIO_ROLE (NOMBRE_ROLE,DESCRIPCION_PERMISOS) VALUES ('CONTADOR','Permiso solamente a editar información contable de activos existentes');
INSERT INTO USUARIO_ROLE (NOMBRE_ROLE,DESCRIPCION_PERMISOS) VALUES ('TAGGER','Encargado de recopilar información cuantitativa del activo');

SELECT * FROM USUARIO_ROLE; 

CREATE TABLE USUARIO (
    ID_USUARIO      INT GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY, 
    NOMBRE          VARCHAR(50) NOT NULL, 
    CORREO          VARCHAR(50) NOT NULL, 
    USER_PASSWORD    VARCHAR(50) NOT NULL, 
    ID_ROLE         INT NOT NULL, 
    CONSTRAINT FK_ID_ROLE FOREIGN KEY (ID_ROLE) REFERENCES USUARIO_ROLE(ID_ROLE)
); 

INSERT INTO USUARIO (NOMBRE, CORREO, USER_PASSWORD, ID_ROLE) VALUES ('Cristopher Morales','cmorale@asset_management.com','Cris123@',1);
INSERT INTO USUARIO (NOMBRE, CORREO, USER_PASSWORD, ID_ROLE) VALUES ('Kimberly Morales','kmorale@asset_management.com','kim123@',2);
INSERT INTO USUARIO (NOMBRE, CORREO, USER_PASSWORD, ID_ROLE) VALUES ('Stephany Morales','smorale@asset_management.com','Fany123@',2);

SELECT * FROM USUARIO;

SELECT 
    U.NOMBRE, 
    U.CORREO, 
    U.CONTRASEÑA, 
    U.ID_ROLE,
    (SELECT UR.NOMBRE_ROLE FROM USUARIO_ROLE UR WHERE UR.ID_ROLE = U.ID_ROLE) AS "NOMBRE ROLE"
FROM 
    USUARIO U;
    
CREATE TABLE CLASE (
    ID_CLASE            INT GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    DESCRIPCION_CLASE   VARCHAR2(50)
);

INSERT INTO CLASE (DESCRIPCION_CLASE) VALUES ('Vehiculos'); 
INSERT INTO CLASE (DESCRIPCION_CLASE) VALUES ('Edificios'); 
INSERT INTO CLASE (DESCRIPCION_CLASE) VALUES ('Maquinaria y Equipo'); 
INSERT INTO CLASE (DESCRIPCION_CLASE) VALUES ('Computadoras'); 

CREATE TABLE CATEGORIA_CUENTA(
    ID_CATEGORIA            INT GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY, 
    DESCRIPCION_CATEGORIA   VARCHAR2(50)
);

INSERT INTO CATEGORIA_CUENTA (DESCRIPCION_CATEGORIA) VALUES ('Activos');
INSERT INTO CATEGORIA_CUENTA (DESCRIPCION_CATEGORIA) VALUES ('Pasivos');
INSERT INTO CATEGORIA_CUENTA (DESCRIPCION_CATEGORIA) VALUES ('Capital');
INSERT INTO CATEGORIA_CUENTA (DESCRIPCION_CATEGORIA) VALUES ('Ingresos');
INSERT INTO CATEGORIA_CUENTA (DESCRIPCION_CATEGORIA) VALUES ('Gastos');

CREATE TABLE CUENTA_CONTABLE(
    ID_CUENTA               VARCHAR2(15) NOT NULL PRIMARY KEY,
    DESCRIPCION_CUENTA      VARCHAR(50) NOT NULL, 
    ID_CATEGORIA            INT NOT NULL, 
    TOTAL_DEBITOS           FLOAT DEFAULT 0,
    TOTAL_CREDITOS          FLOAT DEFAULT 0, 
    BALANCE                 FLOAT DEFAULT 0,
    NATURALEZA              VARCHAR(1) NOT NULL, 
    CONSTRAINT FK_ID_CATEGORIA FOREIGN KEY (ID_CATEGORIA) REFERENCES CATEGORIA_CUENTA(ID_CATEGORIA)
)

INSERT INTO CUENTA_CONTABLE VALUES ('1-2-2-167401','Activo Fijo - Vehiculos',1,0,0,0,'D');
INSERT INTO CUENTA_CONTABLE VALUES ('1-2-2-167402','Activo Fijo - Edificio',1,0,0,0,'D');
INSERT INTO CUENTA_CONTABLE VALUES ('1-2-2-167403','Activo Fijo - Maq y Equipo',1,0,0,0,'D');
INSERT INTO CUENTA_CONTABLE VALUES ('1-2-2-167404','Activo Fijo - Computadoras',1,0,0,0,'D');

INSERT INTO CUENTA_CONTABLE VALUES ('1-2-3-167401','Dep Acumulada - Vehiculos',1,0,0,0,'D');
INSERT INTO CUENTA_CONTABLE VALUES ('1-2-3-167402','Dep Acumulada - Edificio',1,0,0,0,'D');
INSERT INTO CUENTA_CONTABLE VALUES ('1-2-3-167403','Dep Acumulada - Maq y Equipo',1,0,0,0,'D');
INSERT INTO CUENTA_CONTABLE VALUES ('1-2-3-167404','Dep Acumulada - Computadoras',1,0,0,0,'D');


INSERT INTO CUENTA_CONTABLE VALUES ('5-2-2-167401','Gasto Depreciación - Vehiculos',1,0,0,0,'D');
INSERT INTO CUENTA_CONTABLE VALUES ('5-2-2-167402','Gasto Depreciación - Edificio',1,0,0,0,'D');
INSERT INTO CUENTA_CONTABLE VALUES ('5-2-2-167403','Gasto Depreciación - Maq y Equipo',1,0,0,0,'D');
INSERT INTO CUENTA_CONTABLE VALUES ('5-2-2-167404','Gasto Depreciación - Computadoras',1,0,0,0,'D');

SELECT * FROM CUENTA_CONTABLE;

CREATE TABLE ESTADO(
    ID_ESTADO           INT GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY, 
    DESCRIPCION_ESTADO  VARCHAR(50) NOT NULL
); 

INSERT INTO ESTADO (DESCRIPCION_ESTADO) VALUES ('Activo en Bodega');
INSERT INTO ESTADO (DESCRIPCION_ESTADO) VALUES ('Activo en Construcción');
INSERT INTO ESTADO (DESCRIPCION_ESTADO) VALUES ('Activo en Uso');
INSERT INTO ESTADO (DESCRIPCION_ESTADO) VALUES ('Activo Deteriorado');
INSERT INTO ESTADO (DESCRIPCION_ESTADO) VALUES ('Activo Donado');

SELECT * FROM ESTADO;

CREATE TABLE ACTIVO (
    ID_ACTIVO               INT GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY, 
    ID_CLASE                INT NOT NULL, 
    ID_UBICACION            INT NOT NULL, 
    ID_OWNER                INT NOT NULL, 
    ID_ESTADO               INT NOT NULL, 
    DESCRIPCION_ACTIVO      VARCHAR(50),
    CONSTRAINT FK_ID_CLASE FOREIGN KEY (ID_CLASE) REFERENCES CLASE(ID_CLASE), 
    CONSTRAINT FK_ID_UBICACION FOREIGN KEY (ID_UBICACION) REFERENCES UBICACION(ID_UBICACIÓN),
    CONSTRAINT FK_ID_OWNER FOREIGN KEY (ID_OWNER) REFERENCES USUARIO(ID_USUARIO),
    CONSTRAINT FK_ID_ESTADO FOREIGN KEY (ID_ESTADO) REFERENCES ESTADO(ID_ESTADO)
);

INSERT INTO ACTIVO (ID_CLASE,ID_UBICACION,ID_OWNER,ID_ESTADO,DESCRIPCION_ACTIVO) VALUES (1,7,3,1,'Vehiculo de carga');
INSERT INTO ACTIVO (ID_CLASE,ID_UBICACION,ID_OWNER,ID_ESTADO,DESCRIPCION_ACTIVO) VALUES (1,7,2,1,'Vehiculo de carga pesada');
INSERT INTO ACTIVO (ID_CLASE,ID_UBICACION,ID_OWNER,ID_ESTADO,DESCRIPCION_ACTIVO) VALUES (2,1,1,3,'Edificio Principal');
INSERT INTO ACTIVO (ID_CLASE,ID_UBICACION,ID_OWNER,ID_ESTADO,DESCRIPCION_ACTIVO) VALUES (3,5,3,3,'Ensamblador de Microchips');
INSERT INTO ACTIVO (ID_CLASE,ID_UBICACION,ID_OWNER,ID_ESTADO,DESCRIPCION_ACTIVO) VALUES (3,5,2,3,'Ensamblador de Tarjetas Madres');
INSERT INTO ACTIVO (ID_CLASE,ID_UBICACION,ID_OWNER,ID_ESTADO,DESCRIPCION_ACTIVO) VALUES (3,5,1,3,'Ensamblador de Memorias RAM');


SELECT * FROM CLASE; 
SELECT * FROM UBICACION;
SELECT * FROM USUARIO;

SELECT * FROM ACTIVO;

CREATE TABLE ASIENTO (
    ID_ASIENTO      INT GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    ID_ACTIVO       INT NOT NULL,
    FECHA           DATE NOT NULL,
    DESCRIPCIÓN     VARCHAR(50) NOT NULL,
    CONSTRAINT FK_ID_ACTIVO FOREIGN KEY (ID_ACTIVO) REFERENCES ACTIVO(ID_ACTIVO)
);


CREATE TABLE TIPO_VALIDACION (
    ID_TIPO_VALIDACION  INT GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    DESCRIPCION_VALIDACION  VARCHAR(60)
);

--- Pendiente de agregar una tabla que conecte la validación con la clase. 


-- En esta tabla se guardan los valores que deben ser incluidos por cada validación para cada uno de los activos.
CREATE TABLE VALIDACION (
    ID_VALIDACION           INT GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY, 
    ID_TIPO_VALIDACION      INT NOT NULL,
    ID_ACTIVO               INT NOT NULL, 
    VALOR                   VARCHAR(255),
    CONSTRAINT FK_ID_TIPO_VALIDACION FOREIGN KEY (ID_TIPO_VALIDACION) REFERENCES TIPO_VALIDACION(ID_TIPO_VALIDACION),
    CONSTRAINT FK_ID_ACTIVO_VALIDACION FOREIGN KEY (ID_ACTIVO) REFERENCES ACTIVO(ID_ACTIVO)
);












